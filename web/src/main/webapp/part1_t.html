<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<!-- 250219 -->
<title>회원가입 약관</title>
</head>
<body>
	<form id="frm" method="get" action="./part1_t.do" >
	<!-- 개인정보관련된 사항은 무조건 post, 아닌건 get으로 보내도 됨 -->
		<p> 회원가입약관 </p>
		<input type="checkbox" id="all" onclick="allchoice(this.checked);">전체선택 <br>
		<input type="checkbox" name="agree" value="y0" onclick="ag_check();" >서비스 이용약관동의 (필수) <br>
		<input type="checkbox" name="agree" value="y1" onclick="ag_check();" >개인정보 수집 및 이용 (필수) <br>
		<input type="checkbox" name="agree" value="y2" onclick="ag_check();" >이메일 정보 수신 약관 (필수) <br>
		<input type="checkbox" name="agree" value="y3" onclick="ag_check();">광고성 정보 수신 (선택) <br>
		<!-- checkbox의 value값은 값이 날라왔는지 아닌지만 체크하면 됨. 체크 안하면 null이 날아감. -->
		
		<input type="button" value="회원가입" onclick="go_nextpage();">
	</form>
</body>
<script>
	
	//전체손택 클릭시 모두 선택하게 하는 함수 
	var allchoice = function(z){
		var ob = frm.agree;  //form태그 안에서 name이 agree인 오브젝트
		var ea = ob.length; //name이 agree인 오브젝트 전체 개수
		console.log(ob);
		console.log(ea);
		var w;
		for(w=0; w<ea; w++){  //전체선택 클릭시 아래 체크박스 모두 선택되도록 작동 
			ob[w].checked = z ;  //같은 이름의 name값은 배열로 순차적으로 처리됨 
		}
	}
	
	//하나라도 해제되었을 경우 전체선택칸의 체크를 해제하는 함수 
	var ag_check = function () {
		var ob = frm.agree;  
		var ea = ob.length;
		var all = document.getElementById("all");
		var count=0;
		
		var w=0;
		while(w < ea){
			if(ob[w].checked == true){
				count++;
			}
			w++;
		}
		if(ea==count){  //name이 agree인 오브젝트의 전체개수와 카운트 개수가 일치할경우 
			all.checked = true;
		}else{
			all.checked = false;
		}
	}
	
	//필수사항 모두 체크되었는지 확인하는 함수 
	function go_nextpage(){
		if(frm.agree[0].checked == true 
			&& frm.agree[1].checked == true 
			&& frm.agree[2].checked == true){
				frm.submit();
		}else {
			alert("필수사항에 모두 체크해야합니다.");
		}
	}
		
</script>
</html>